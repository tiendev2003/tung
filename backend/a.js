const variantsData = [
  {
    _id: "67377884164fa411f9e8c144",
    title: "Color",
    name: "Color",
    variants: [
      {
        name: "White",
        status: "show",
        _id: "67377884164fa411f9e8c145",
      },
      {
        name: "BLack",
        status: "show",
        _id: "673778a4164fa411f9e8c164",
      },
      {
        name: "Green",
        status: "show",
        _id: "673778aa164fa411f9e8c17d",
      },
      {
        name: "Blue",
        status: "show",
        _id: "673778b1164fa411f9e8c19d",
      },
    ],
    option: "Radio",
    type: "attribute",
    status: "show",
    createdAt: "2024-11-15T16:36:20.878Z",
    updatedAt: "2024-11-15T16:37:05.484Z",
    __v: 0,
  },
  {
    _id: "67377897164fa411f9e8c14b",
    title: "Size",
    name: "Size",
    variants: [
      {
        name: "28",
        status: "show",
        _id: "67377897164fa411f9e8c14c",
      },
      {
        name: "29",
        status: "show",
        _id: "67377d428f7f66a993e537cf",
      },
      {
        name: "30",
        status: "show",
        _id: "67377d4a8f7f66a993e537ee",
      },
      {
        name: "31",
        status: "show",
        _id: "67377d4f8f7f66a993e53814",
      },
      {
        name: "32",
        status: "show",
        _id: "67377d658f7f66a993e53841",
      },
    ],
    option: "Radio",
    type: "attribute",
    status: "show",
    createdAt: "2024-11-15T16:36:39.695Z",
    updatedAt: "2024-11-15T16:57:09.270Z",
    __v: 0,
  },
];
const product = {
  variants: [
    {
      "67377884164fa411f9e8c144": "673778aa164fa411f9e8c17d",
      "67377897164fa411f9e8c14b": "67377d428f7f66a993e537cf",
      originalPrice: 23000,
      price: 0,
      quantity: 366,
      discount: 23000,
      productId: "67377a81b8f2c582a6a2b739-0",
      barcode: "dfadf",
      sku: "con",
      image:
        "https://res.cloudinary.com/dfxrqzsay/image/upload/v1729918304/category/1714018601.png",
    },
    {
      "67377884164fa411f9e8c144": "673778a4164fa411f9e8c164",
      "67377897164fa411f9e8c14b": "67377d428f7f66a993e537cf",
      originalPrice: 23000,
      price: 0,
      quantity: 366,
      discount: 23000,
      productId: "67377a81b8f2c582a6a2b739-1",
      barcode: "dfadf",
      sku: "con",
      image:
        "https://res.cloudinary.com/dfxrqzsay/image/upload/v1729918304/category/1714018601.png",
    },
    {
      "67377884164fa411f9e8c144": "67377884164fa411f9e8c145",
      "67377897164fa411f9e8c14b": "67377d428f7f66a993e537cf",
      originalPrice: 23000,
      price: 0,
      quantity: 366,
      discount: 23000,
      productId: "67377a81b8f2c582a6a2b739-2",
      barcode: "dfadf",
      sku: "con",
      image:
        "https://res.cloudinary.com/dfxrqzsay/image/upload/v1729918304/category/1714018601.png",
    },
    {
      "67377884164fa411f9e8c144": "673778aa164fa411f9e8c17d",
      "67377897164fa411f9e8c14b": "67377d4a8f7f66a993e537ee",
      originalPrice: 23000,
      price: 0,
      quantity: 366,
      discount: 23000,
      productId: "67377a81b8f2c582a6a2b739-3",
      barcode: "dfadf",
      sku: "con",
      image:
        "https://res.cloudinary.com/dfxrqzsay/image/upload/v1729918304/category/1714018601.png",
    },
    {
      "67377884164fa411f9e8c144": "673778a4164fa411f9e8c164",
      "67377897164fa411f9e8c14b": "67377d4a8f7f66a993e537ee",
      originalPrice: 23000,
      price: 0,
      quantity: 366,
      discount: 23000,
      productId: "67377a81b8f2c582a6a2b739-4",
      barcode: "dfadf",
      sku: "con",
      image:
        "https://res.cloudinary.com/dfxrqzsay/image/upload/v1729918304/category/1714018601.png",
    },
    {
      "67377884164fa411f9e8c144": "67377884164fa411f9e8c145",
      "67377897164fa411f9e8c14b": "67377d4a8f7f66a993e537ee",
      originalPrice: 23000,
      price: 0,
      quantity: 366,
      discount: 23000,
      productId: "67377a81b8f2c582a6a2b739-5",
      barcode: "dfadf",
      sku: "con",
      image:
        "https://res.cloudinary.com/dfxrqzsay/image/upload/v1729918304/category/1714018601.png",
    },
    {
      "67377884164fa411f9e8c144": "673778aa164fa411f9e8c17d",
      "67377897164fa411f9e8c14b": "67377d4f8f7f66a993e53814",
      originalPrice: 23000,
      price: 0,
      quantity: 366,
      discount: 23000,
      productId: "67377a81b8f2c582a6a2b739-6",
      barcode: "dfadf",
      sku: "con",
      image:
        "https://res.cloudinary.com/dfxrqzsay/image/upload/v1729918304/category/1714018601.png",
    },
    {
      "67377884164fa411f9e8c144": "673778a4164fa411f9e8c164",
      "67377897164fa411f9e8c14b": "67377d4f8f7f66a993e53814",
      originalPrice: 23000,
      price: 0,
      quantity: 366,
      discount: 23000,
      productId: "67377a81b8f2c582a6a2b739-7",
      barcode: "dfadf",
      sku: "con",
      image:
        "https://res.cloudinary.com/dfxrqzsay/image/upload/v1729918304/category/1714018601.png",
    },
    {
      "67377884164fa411f9e8c144": "67377884164fa411f9e8c145",
      "67377897164fa411f9e8c14b": "67377d4f8f7f66a993e53814",
      originalPrice: 23000,
      price: 0,
      quantity: 366,
      discount: 23000,
      productId: "67377a81b8f2c582a6a2b739-8",
      barcode: "dfadf",
      sku: "con",
      image:
        "https://res.cloudinary.com/dfxrqzsay/image/upload/v1729918304/category/1714018601.png",
    },
  ],
};
function getProductAttributes(product, variantsData) {
    // Tạo đối tượng để lưu trữ các thuộc tính size và color, bao gồm cả name và id
    const attributes = {
      size: [],
      color: [],
    };
  
    // Lặp qua từng sản phẩm trong mảng variants của sản phẩm
    product.variants.forEach((variant) => {
      // Lặp qua tất cả các đối tượng trong variantsData
      Object.keys(variant).forEach((key) => {
        // Tìm thuộc tính title (Color hoặc Size) từ variantsData
        const variantData = variantsData.find((data) => data._id === key);
  
        // Nếu tìm thấy thuộc tính (Color hoặc Size)
        if (variantData) {
          const variantId = variant[key]; // lấy id của variant trong sản phẩm
  
          // Lặp qua các variants của loại thuộc tính đó trong variantsData
          variantData.variants.forEach((variantOption) => {
            // Nếu id trong variant của sản phẩm khớp với id trong variantsData
            if (variantOption._id === variantId) {
              // Nếu thuộc tính là màu (Color)
              if (variantData.title === 'Color') {
                // Thêm đối tượng {name, id} vào mảng color
                attributes.color.push({
                  name: variantOption.name,
                  id: variantOption._id
                });
              }
  
              // Nếu thuộc tính là kích cỡ (Size)
              if (variantData.title === 'Size') {
                // Thêm đối tượng {name, id} vào mảng size
                attributes.size.push({
                  name: variantOption.name,
                  id: variantOption._id
                });
              }
            }
          });
        }
      });
    });
  
    // Loại bỏ các phần tử trùng lặp trong size và color bằng cách sử dụng map
    attributes.size = Array.from(new Map(attributes.size.map(item => [item.id, item])).values());
    attributes.color = Array.from(new Map(attributes.color.map(item => [item.id, item])).values());
  
    return attributes;
  }
  
  // Gọi hàm và in kết quả
  const productAttributes = getProductAttributes(product, variantsData);
  console.log(productAttributes);
  